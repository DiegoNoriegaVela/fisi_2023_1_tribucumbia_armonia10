{"ast":null,"code":"export default async function onLogin(_ref) {\n  let {\n    user,\n    setUser\n  } = _ref;\n  setUser({\n    ...user,\n    error: '',\n    logging: true\n  });\n  const response = await fetch('http://localhost:8000/api/login', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    credentials: 'include',\n    body: JSON.stringify({\n      email: user.email,\n      contrasenia: user.contrasenia\n    })\n  });\n  const content = await response.json();\n  setUser({\n    ...user,\n    logging: false\n  });\n  const logged = content['message'] === 'success';\n  if (logged) {\n    console.log(\"logged\");\n    setUser({\n      ...user,\n      contrasenia: '',\n      logged: true,\n      error: ''\n    });\n    return;\n  }\n  setUser({\n    ...user,\n    error: content['message']\n  });\n}","map":{"version":3,"names":["onLogin","_ref","user","setUser","error","logging","response","fetch","method","headers","credentials","body","JSON","stringify","email","contrasenia","content","json","logged","console","log"],"sources":["C:/Users/ANGEL/Desktop/Carpetas de Info/ingenieria de Sistemas/9no ciclo/taller/Proyecto/fisi_2023_0_triburock_hombresg-main/fisi_2023_0_TAD_triburock_hombresg_fe/src/pages/login/onLogin.ts"],"sourcesContent":["import {UserAuth} from \"../../App\";\r\nimport {Dispatch} from \"react\";\r\n\r\ntype Props = {\r\n    user: UserAuth,\r\n    setUser: Dispatch<UserAuth>\r\n}\r\n\r\nexport default async function onLogin({user, setUser}: Props) {\r\n\r\n    setUser({...user, error: '', logging: true})\r\n\r\n    const response = await fetch('http://localhost:8000/api/login', {\r\n        method: 'POST',\r\n        headers: {'Content-Type': 'application/json'},\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n            email: user.email,\r\n            contrasenia: user.contrasenia\r\n        })\r\n    });\r\n    const content = await response.json();\r\n\r\n    setUser({...user, logging: false})\r\n\r\n    const logged = content['message'] === 'success'\r\n\r\n    if (logged) {\r\n        console.log(\"logged\")\r\n        setUser({...user, contrasenia: '', logged: true, error: ''})\r\n        return\r\n    }\r\n    setUser({...user, error: content['message']})\r\n}\r\n"],"mappings":"AAQA,eAAe,eAAeA,OAAOA,CAAAC,IAAA,EAAyB;EAAA,IAAxB;IAACC,IAAI;IAAEC;EAAc,CAAC,GAAAF,IAAA;EAExDE,OAAO,CAAC;IAAC,GAAGD,IAAI;IAAEE,KAAK,EAAE,EAAE;IAAEC,OAAO,EAAE;EAAI,CAAC,CAAC;EAE5C,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAE;IAC5DC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAC,cAAc,EAAE;IAAkB,CAAC;IAC7CC,WAAW,EAAE,SAAS;IACtBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACjBC,KAAK,EAAEZ,IAAI,CAACY,KAAK;MACjBC,WAAW,EAAEb,IAAI,CAACa;IACtB,CAAC;EACL,CAAC,CAAC;EACF,MAAMC,OAAO,GAAG,MAAMV,QAAQ,CAACW,IAAI,EAAE;EAErCd,OAAO,CAAC;IAAC,GAAGD,IAAI;IAAEG,OAAO,EAAE;EAAK,CAAC,CAAC;EAElC,MAAMa,MAAM,GAAGF,OAAO,CAAC,SAAS,CAAC,KAAK,SAAS;EAE/C,IAAIE,MAAM,EAAE;IACRC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;IACrBjB,OAAO,CAAC;MAAC,GAAGD,IAAI;MAAEa,WAAW,EAAE,EAAE;MAAEG,MAAM,EAAE,IAAI;MAAEd,KAAK,EAAE;IAAE,CAAC,CAAC;IAC5D;EACJ;EACAD,OAAO,CAAC;IAAC,GAAGD,IAAI;IAAEE,KAAK,EAAEY,OAAO,CAAC,SAAS;EAAC,CAAC,CAAC;AACjD"},"metadata":{},"sourceType":"module","externalDependencies":[]}